# Kickstart file automatically generated by anaconda.

# text mode
text

# install a fresh system rather than upgrade an existing system
install
url --url http://192.168.10.201/centos/6/os/x86_64/
repo --name=epel --baseurl=http://192.168.10.201/epel/6/x86_64
repo --name=dag --baseurl=http://192.168.10.201/dag/6/x86_64/

# X is not configured on the installed system
skipx

# timezone
timezone Asia/Shanghai

# default language to use on the installed system
lang en_US.UTF-8

# system keyboard type 
keyboard us

# bootloader password is 9hx9kNn4 which generated by 'grub-md5-crypt'
bootloader --location=mbr --append="crashkernel=auto rhgb quiet" --iscrypted --password=$1$nI0Jt1$UnUZFi0V3ii8RwkAkGKaC0

# authentication options
authconfig --enableshadow --passalgo=sha512

firewall --disabled
selinux --disabled
firstboot --disabled

# If zerombr is specified, any disks whose formatting is unrecognized are initialized
zerombr

# Removes partitions from the system before the creation of new partitions
clearpart --all --initlabel

# only disks listed here will be used during installation
ignoredisk --only-use=/dev/sda

# Creates a partition on the system 
part /boot --fstype=ext4 --size=512
 
# The partition will be used for LVM
part pv.1 --grow --size=1

# create a Logical Volume Management (LVM) group
volgroup domuvg pv.1

# 
logvol /     --vgname=domuvg --fstype=ext4 --name=root --size=15000
logvol /home --vgname=domuvg --fstype=ext4 --name=home --fsoptions="defaults,nodev,nosuid" --size=5000
#logvol /var  --vgname=domuvg --fstype=ext4 --name=var  --fsoptions="defaults,nodev,noexec,nosuid" --size=15000
#logvol /tmp  --vgname=domuvg --fstype=ext4 --name=tmp  --fsoptions="defaults,nodev,noexec,nosuid" --size=15000
logvol swap  --vgname=domuvg --fstype=swap --name=swap --size=4096

network --onboot yes --device eth0 --bootproto=dhcp
#network --onboot yes --device eth0 --bootproto=static --ip=192.168.56.10 --netmask=255.255.255.0 --gateway=192.168.56.1 --hostname=HOST_NAME

# python -c 'import crypt; print(crypt.crypt("uu4UmY0w", "$6$/Y4FoJTG"))' 
rootpw --iscrypted $6$/Y4FoJTG$X.PigLTN9EDnDYPA1n6e3RDnqRqrqLQddATHm/v7uy3KnGBTo84tFCg5KyNQ2Xf0nO4iRMTeWsNY/5n8mtBsu.
 
%packages --nobase
acpid
at
bc
bind-utils
cronie-noanacron
crontabs
dmidecode
dos2unix
dstat
elinks
finger
freetype
ftp
gnutls
ipmitool
iptables
lm_sensors
lm_sensors-libs
logrotate
lrzsz
lsof
mailx
man
mlocate
nc
net-snmp-libs
net-snmp-utils
nmap
nscd
ntp
ntpdate
openssh-clients
openssh-server
perl
perl-CPAN
perl-libs
python
rsync
screen
sendmail
smartmontools
strace
sysstat
tcpdump
telnet
tmpwatch
traceroute
unzip
vim-common
vim-enhanced
vixie-cron
wget
which
yum
yum-utils
zip
zlib-devel
srvadmin-idracadm7
-selinux-policy-targeted
-iptables-ipv6
%end

%post
wget http://192.168.10.253/init.sh -O - | sh
#yum install --enablerepo=epel -y htop pv tmux mc
%end

# Reboot after installation
reboot
